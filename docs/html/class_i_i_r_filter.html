<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: IIRFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_i_i_r_filter.html','','class_i_i_r_filter-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">IIRFilter Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Wrapper C++ para filtros IIR Biquad de CMSIS-DSP, optimizado para bioseñales.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_i_i_r_filter_8h_source.html">IIRFilter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad0520e7eb1501554f092abcfb12c98bd" id="r_ad0520e7eb1501554f092abcfb12c98bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad0520e7eb1501554f092abcfb12c98bd">IIRFilter</a> (const float32_t *coeffs, uint8_t numStages, uint16_t blockSize)</td></tr>
<tr class="memdesc:ad0520e7eb1501554f092abcfb12c98bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor que inicializa el filtro IIR Biquad.  <br /></td></tr>
<tr class="memitem:a7fbc93f9fc0ff65e785f8f2bfe13cfdf" id="r_a7fbc93f9fc0ff65e785f8f2bfe13cfdf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7fbc93f9fc0ff65e785f8f2bfe13cfdf">~IIRFilter</a> ()</td></tr>
<tr class="memdesc:a7fbc93f9fc0ff65e785f8f2bfe13cfdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor de la clase <a class="el" href="class_i_i_r_filter.html" title="Wrapper C++ para filtros IIR Biquad de CMSIS-DSP, optimizado para bioseñales.">IIRFilter</a>.  <br /></td></tr>
<tr class="memitem:a363659816d5bf72842b95b6b3e85ad7e" id="r_a363659816d5bf72842b95b6b3e85ad7e"><td class="memItemLeft" align="right" valign="top">float32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a363659816d5bf72842b95b6b3e85ad7e">processSample</a> (float32_t input)</td></tr>
<tr class="memdesc:a363659816d5bf72842b95b6b3e85ad7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Procesa una muestra individual en tiempo real.  <br /></td></tr>
<tr class="memitem:a888d5aef189c322259f403d4dd8356bc" id="r_a888d5aef189c322259f403d4dd8356bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a888d5aef189c322259f403d4dd8356bc">processBuffer</a> (const float32_t *inputArray, float32_t *outputArray, uint32_t length)</td></tr>
<tr class="memdesc:a888d5aef189c322259f403d4dd8356bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Procesa un buffer completo de muestras.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrapper C++ para filtros IIR Biquad de CMSIS-DSP, optimizado para bioseñales. </p>
<ul>
<li>Esta clase encapsula la funcionalidad de filtros IIR (Infinite Impulse Response) de CMSIS-DSP, usando una estructura de cascada de secciones de segundo orden (Biquad). Esta implementación es ideal para filtros con respuestas de frecuencia muy selectivas que serían computacionalmente costosos si se implementaran como FIR.</li>
<li></li>
</ul>
<p>Los filtros IIR son especialmente útiles para:</p><ul>
<li>Filtros de alta selectividad (p. ej. notch muy agudo) con bajo orden.</li>
<li>Emulación de filtros analógicos clásicos (Butterworth, Chebyshev).</li>
<li>Menor carga computacional y memoria que un filtro FIR de rendimiento similar.</li>
<li>A diferencia de los filtros FIR, los IIR tienen una respuesta de fase no lineal, lo que puede distorsionar la forma de onda. Esto debe considerarse en aplicaciones donde la morfología de la señal es crítica (p. ej. análisis del complejo QRS en ECG).</li>
<li>La clase maneja automáticamente:</li>
<li>Inicialización del estado interno del filtro.</li>
<li>Gestión de memoria para el buffer de estados.</li>
<li>Interfaz con las funciones Biquad optimizadas de CMSIS-DSP.</li>
<li><dl class="section note"><dt>Note</dt><dd>Los coeficientes deben ser calculados externamente (ej. Python/scipy, MATLAB) y formateados para la estructura Biquad de CMSIS-DSP. Cada sección Biquad requiere 5 coeficientes: {b0, b1, b2, a1, a2}. El coeficiente a0 se asume como 1.</dd></dl>
</li>
<li><dl class="section warning"><dt>Warning</dt><dd>La memoria para los coeficientes debe permanecer válida durante toda la vida del objeto <a class="el" href="class_i_i_r_filter.html" title="Wrapper C++ para filtros IIR Biquad de CMSIS-DSP, optimizado para bioseñales.">IIRFilter</a>.</dd></dl>
</li>
<li><dl class="section see"><dt>See also</dt><dd>arm_biquad_cascade_df1_f32() para detalles de la implementación subyacente. </dd></dl>
</li>
</ul>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_c_1_2_users_2_sergio_2_documents_2_platform_i_o_2_projects_200_01-_01_c_m_s_i_s_01test_2lib_2_b2e4f6e979bfd050f0aa06f64b1922aec.html#_a0">C:/Users/Sergio/Documents/PlatformIO/Projects/00 - CMSIS test/lib/BioFilterLib/src/filters/IIRFilter.h</a>.</dd>
</dl>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad0520e7eb1501554f092abcfb12c98bd" name="ad0520e7eb1501554f092abcfb12c98bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0520e7eb1501554f092abcfb12c98bd">&#9670;&#160;</a></span>IIRFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IIRFilter::IIRFilter </td>
          <td>(</td>
          <td class="paramtype">const float32_t *</td>          <td class="paramname"><span class="paramname"><em>coeffs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>numStages</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>blockSize</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor que inicializa el filtro IIR Biquad. </p>
<ul>
<li></li>
</ul>
<p>El constructor realiza las siguientes operaciones:</p><ol type="1">
<li>Almacena las referencias y parámetros del filtro.</li>
<li>Calcula el tamaño del buffer de estado necesario: cada etapa Biquad requiere 4 valores de estado (x[n-1], x[n-2], y[n-1], y[n-2]).</li>
<li>Asigna memoria dinámicamente para el buffer de estados y la inicializa a cero.</li>
<li>Llama a arm_biquad_cascade_df1_init_f32() para configurar la instancia del filtro de CMSIS-DSP con los coeficientes y el estado.</li>
</ol>
<ul>
<li><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">coeffs</td><td>Puntero al array de coeficientes del filtro (numStages * 5). </td></tr>
    <tr><td class="paramname">numStages</td><td>Número de secciones Biquad. </td></tr>
    <tr><td class="paramname">blockSize</td><td>Tamaño del bloque de procesamiento.</td></tr>
  </table>
  </dd>
</dl>
</li>
<li><dl class="section warning"><dt>Warning</dt><dd>Si la asignación de memoria falla, el comportamiento es indefinido. Es recomendable añadir una comprobación de puntero nulo en un sistema de producción. </dd></dl>
</li>
</ul>

</div>
</div>
<a id="a7fbc93f9fc0ff65e785f8f2bfe13cfdf" name="a7fbc93f9fc0ff65e785f8f2bfe13cfdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fbc93f9fc0ff65e785f8f2bfe13cfdf">&#9670;&#160;</a></span>~IIRFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IIRFilter::~IIRFilter </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor de la clase <a class="el" href="class_i_i_r_filter.html" title="Wrapper C++ para filtros IIR Biquad de CMSIS-DSP, optimizado para bioseñales.">IIRFilter</a>. </p>
<p>Destructor que libera la memoria del buffer de estados.</p>
<ul>
<li>Libera la memoria asignada para el buffer de estados interno.</li>
<li></li>
</ul>
<p>Libera de forma segura la memoria asignada dinámicamente en el constructor para evitar fugas de memoria. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a888d5aef189c322259f403d4dd8356bc" name="a888d5aef189c322259f403d4dd8356bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a888d5aef189c322259f403d4dd8356bc">&#9670;&#160;</a></span>processBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IIRFilter::processBuffer </td>
          <td>(</td>
          <td class="paramtype">const float32_t *</td>          <td class="paramname"><span class="paramname"><em>inputArray</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float32_t *</td>          <td class="paramname"><span class="paramname"><em>outputArray</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>length</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Procesa un buffer completo de muestras. </p>
<p>Procesa un buffer completo de muestras usando el filtro IIR.</p>
<ul>
<li>Aplica el filtro IIR a un array de muestras. Optimizado para mayor throughput en procesamiento por lotes.</li>
<li><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputArray</td><td>Puntero al array de muestras de entrada. </td></tr>
    <tr><td class="paramname">outputArray</td><td>Puntero al array donde se escribirán las muestras filtradas. </td></tr>
    <tr><td class="paramname">length</td><td>Número de muestras a procesar.</td></tr>
  </table>
  </dd>
</dl>
</li>
<li><dl class="section warning"><dt>Warning</dt><dd>Los arrays de entrada y salida no deben solaparse en memoria.</dd></dl>
</li>
<li></li>
</ul>
<p>Aplica el filtro IIR a un array completo de muestras, aprovechando las optimizaciones de procesamiento en bloque de CMSIS-DSP (SIMD) para un mayor rendimiento en comparación con el procesamiento muestra por muestra.</p><ul>
<li><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputArray</td><td>Puntero al buffer de entrada. </td></tr>
    <tr><td class="paramname">outputArray</td><td>Puntero al buffer de salida. </td></tr>
    <tr><td class="paramname">length</td><td>Número de muestras en los buffers.</td></tr>
  </table>
  </dd>
</dl>
</li>
<li><dl class="section remark"><dt>Remarks</dt><dd>El estado del filtro se mantiene y actualiza correctamente entre llamadas, permitiendo procesar un flujo de datos continuo en bloques. La función arm_biquad_cascade_df1_f32 está altamente optimizada para arquitecturas ARM y ofrece un rendimiento significativamente mejor para bloques de datos grandes. </dd></dl>
</li>
</ul>

</div>
</div>
<a id="a363659816d5bf72842b95b6b3e85ad7e" name="a363659816d5bf72842b95b6b3e85ad7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a363659816d5bf72842b95b6b3e85ad7e">&#9670;&#160;</a></span>processSample()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float32_t IIRFilter::processSample </td>
          <td>(</td>
          <td class="paramtype">float32_t</td>          <td class="paramname"><span class="paramname"><em>input</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Procesa una muestra individual en tiempo real. </p>
<p>Procesa una muestra individual usando el filtro IIR.</p>
<ul>
<li>Aplica el filtro IIR a una sola muestra de entrada. Ideal para aplicaciones de baja latencia.</li>
<li><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>Valor de la muestra de entrada. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>float32_t Muestra filtrada de salida.</dd></dl>
</li>
<li></li>
</ul>
<p>Esta función es una envoltura alrededor de la función de procesamiento de CMSIS-DSP, configurada para procesar una única muestra. Es ideal para aplicaciones en tiempo real que operan muestra por muestra.</p><ul>
<li><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>Muestra de entrada a filtrar. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>float32_t Muestra filtrada de salida.</dd></dl>
</li>
<li><dl class="section user"><dt>Detalles de implementación</dt><dd>Llama a arm_biquad_cascade_df1_f32() con una longitud de bloque de 1. La función de CMSIS-DSP maneja automáticamente la actualización del estado interno del filtro a través de todas las etapas en cascada, asegurando la continuidad entre llamadas. </dd></dl>
</li>
</ul>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>BioFilterLib/src/filters/<a class="el" href="_i_i_r_filter_8h_source.html">IIRFilter.h</a></li>
<li>BioFilterLib/src/filters/<a class="el" href="_i_i_r_filter_8cpp.html">IIRFilter.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_i_i_r_filter.html">IIRFilter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
